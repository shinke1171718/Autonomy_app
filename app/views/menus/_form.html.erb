<div class="menu-registration-container" data-user-id="<%= current_user.id %>">

  <div class="menu-registration-title">
    <h1>献立登録</h1>
  </div>


  <div class ="contents-title">
    <p>１.献立情報入力</p>
  </div>

  <div id="main-menu-error" class="menu-error-message"></div>

  <div class="menu-registration-input">
    <%= form_with model: @menu, url: confirm_user_menu_path(current_user.id), method: :post, id: "menu_form" do |f| %>

      <div id="menu-error_name" class="menu-error"></div>
      <div class="name-registration-field">
        <%= f.text_field :menu_name, id: "menu_name", autofocus: true, autocomplete: "menu_name", placeholder: "献立名(最大20字)", maxlength: 20 %>
      </div>

      <div id="menu-error-contents-1" class="menu-error"></div>
      <div class="menu-registration-field">
        <%= f.text_field :menu_contents, id: "menu_contents", autofocus: true, autocomplete: "menu_contents", placeholder: "献立内容(最大20字)", maxlength: 20 %>
      </div>

      <div id="menu-error-contents-2" class="menu-error"></div>
      <div class="content-registration-field">
        <%= f.text_area :contents, id: "contents", autofocus: true, autocomplete: "contents", placeholder: "作り方(最大700字)", maxlength: 700 %>
      </div>

      <div class="image-registration-field">
        <%= f.file_field :image, autofocus: true, autocomplete: "image", placeholder: "献立の写真" %>
      </div>

      <div class ="contents-title">
        <p>２.食材リスト設定</p>
      </div>

      <div id="ingredients-error" class="ingredients-error-message"></div>

      <div class="ingredient-registration-input">
        <div class="ingredient-registration-field">
          <div id="ingredient-form-add-container">
            <%= f.fields_for :ingredients do |ingredient_form| %>
              <div id="ingredient_form"></div>
              <div id="ingredient-select" class="ingredient-select">
                <span class="close-button">×</span>
                <input type="text" id="ingredientSearchInput" class="SearchInput" placeholder="食材名を検索" />
                <p class="search-results-title">検索結果</p>
                <div id="searchResultsContainer" class="searchContainer"></div>
                <p class="drop-down-title">食材一覧</p>
                <div class="scrollable-section">
                  <% @materials_by_category.each_with_index do |(category, materials), index| %>
                    <div class="ingredient-category">
                      <p id="categoryElement-<%= index %>" class="categoryElement"><%= category %></p>

                      <ul id="ingredients-list-<%= index %>" style="display: none;">
                        <% materials.each do |material| %>
                          <% if material.material_name %>
                            <li data-value="<%= material.id %>" data-hiragana="<%= material.hiragana %>" data-material-name="<%= material.material_name %>">
                              <%= material.material_name %>
                          <% end %>
                        <% end %>
                      </ul>
                    </div>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>
        </div>

        <div class="count-up-button">
          <button class="form-count-up" data-action="increment" id="form-count-up"><span id="formCountLimit"></span></button>
        </div>
      </div>

      <div class="menu-registration-actions", data-turbo-action="submit">
        <%= f.submit "次へ"%>
      </div>
    <% end %>

    <div class="menu-registration-back-button">
      <%= button_to "戻る", user_menus_path, class: "back-button", method: :get %>
    </div>

  </div>
</div>

<div id="dropdownBackground" class="dropdown-bg"></div>